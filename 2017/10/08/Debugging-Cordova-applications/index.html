<!DOCTYPE html>
<html lang="en">

<!-- Head tag -->
<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!--Description-->
    
        <meta name="description" content="From Chrome Dev Tools to raw ADB logcat output. This article covers debugging in desktop web browsers as well as in Android devices.">
    

    <!--Author-->
    
        <meta name="author" content="Krzysztof Zbiciński">
    

    <!--Social Title-->
    
        <meta property="og:title" content="Debugging Cordova applications"/>
        <meta name="twitter:title" content="Debugging Cordova applications"/>      
        <meta itemprop="name" content="Debugging Cordova applications"/>  
    

    <!--Social Description-->
    
        <meta property="og:description" content="From Chrome Dev Tools to raw ADB logcat output. This article covers debugging in desktop web browsers as well as in Android devices." />
        <meta name="twitter:description" content="From Chrome Dev Tools to raw ADB logcat output. This article covers debugging in desktop web browsers as well as in Android devices." />       
        <meta itemprop="description" content="From Chrome Dev Tools to raw ADB logcat output. This article covers debugging in desktop web browsers as well as in Android devices." />        
    

    <!--Open Graph Site Name-->
    <meta property="og:site_name" content="Krzysztof Zbiciński - Blog"/>

    <!--Type page-->
    
        <meta property="og:type" content="article" />
    

    <!--Page Cover-->
    
        <meta property="og:image" content="http://zbic.in/2017/10/08/Debugging-Cordova-applications/lilly-rum-342740.jpg" />
        <meta name="twitter:image:src" content="http://zbic.in/2017/10/08/Debugging-Cordova-applications/lilly-rum-342740.jpg">
        <meta itemprop="image" content="http://zbic.in/2017/10/08/Debugging-Cordova-applications/lilly-rum-342740.jpg">     
    

        <meta name="twitter:card" content="summary_large_image">
    
        <meta name="twitter:site" content="@zbicin" />
        <meta name="twitter:creator" content="@zbicin">
    

    <!-- Title -->
    
    <title>Debugging Cordova applications - Krzysztof Zbiciński - Blog - Pragmatic web development</title>

    <!-- Bootstrap Core CSS -->
    <link href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" rel="stylesheet"/>

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/style.css">

    <!-- Custom Fonts -->
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href="//fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic" rel="stylesheet" type="text/css">
    <link href="//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" rel="stylesheet" type="text/css">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="//oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="//oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- Gallery -->
    <link href="//cdnjs.cloudflare.com/ajax/libs/featherlight/1.3.5/featherlight.min.css" type="text/css" rel="stylesheet" />

    <!-- Google Analytics -->
    
    <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-27343777-6', 'auto');
        ga('send', 'pageview');

    </script>



    <!-- favicon -->
    
    <link rel="icon" href="/img/code.png">
    

    
    <script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script>
    
	
</head>


<body>

    <!-- Menu -->
    <!-- Navigation -->
<nav class="navbar navbar-default navbar-custom navbar-fixed-top">
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">Krzysztof Zbiciński - Blog</a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                
                    <li>
                        <a href="/">
                            
                                Home
                            
                        </a>
                    </li>
                
                    <li>
                        <a href="/tags">
                            
                                Tags
                            
                        </a>
                    </li>
                
                    <li>
                        <a href="/about">
                            
                                About
                            
                        </a>
                    </li>
                
                    <li>
                        <a href="/atom.xml">
                            
                                RSS
                            
                        </a>
                    </li>
                
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
    <!-- /.container -->
</nav>

    <!-- Main Content -->
    <!-- Page Header -->
<!-- Set your background image for this header in your post front-matter: cover -->

<header class="intro-header" style="background-color: #323034; background-image: url('lilly-rum-342740.jpg')">
    <div class="backdrop" style="opacity: 0.5"></div>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <div class="post-heading">
                    <h1>Debugging Cordova applications</h1>
                    
                    <h2 class="post-subheading">
                        From Chrome Dev Tools to raw ADB logcat output .
                    </h2>
                    
                    <span class="meta">
                        <!-- Date and Author -->
                        
                            Posted by Krzysztof Zbiciński
                        
                        
                            on
                            2017-10-08.
                        
                    </span>
                </div>
            </div>
        </div>
    </div>
</header>

<!-- Post Content -->
<article>
    <div class="container">
        <div class="row">

            <!-- Gallery -->
            

            <!-- Post Main Content -->
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <p>Apache Cordova gives us a great opportunity to build mobile applications using the web development stack. It does so by embedding an HTML document into a special instance of a web browser and  exhibiting several additional APIs in JavaScript.</p>
<img src="/2017/10/08/Debugging-Cordova-applications/cordovaBot.png" class="center" width="150" height="150" title="Apache Cordova Logo">
<p>It all sounds great until the first obstacles appear in our sight. Sooner or <del>later</del> sooner we need to test the application and debug all of the unexpected behaviours. There are several ways of doing so, depending on the version of the device we want to test.</p>
<p>From Chrome Dev Tools to raw ADB logcat output. This article covers debugging in desktop web browsers as well as in Android devices.</p>
<h2 id="Serving-application-as-a-webpage-using-cordova-serve"><a href="#Serving-application-as-a-webpage-using-cordova-serve" class="headerlink" title="Serving application as a webpage using cordova serve"></a>Serving application as a webpage using cordova serve</h2><p>That’s the easy one. You can simply type <code>cordova serve</code> in your terminal and it will launch a web server which makes your application accessible via a regular web browser either on your PC or on your mobile device. In the first case you can simply use Chrome/Firefox Dev Tools in order to debug.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">$ cordova serve</div><div class="line">[cordova] starting app server...</div><div class="line">[cordova] listening on 10.7.206.254:3000</div><div class="line">[cordova] </div><div class="line">[cordova] ctrl-c to stop the server</div><div class="line">[cordova]</div></pre></td></tr></table></figure>
<img src="/2017/10/08/Debugging-Cordova-applications/devtools.png" class="center" width="570" title="Debugging using Chrome Dev Tools">
<p>However, there are two catches in that approach.</p>
<p>First of all, some of the additional JavaScript interfaces provided by Cordova or its plugins will not be available. For instance, when using the served webpage I was not able to get the version using the <a href="https://github.com/whiteoctober/cordova-plugin-app-version" target="_blank" rel="external">cordova-plugin-app-version</a>. </p>
<p>In addition to that, if your application makes HTTP requests to another service, you will have to deal with <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Access_control_CORS" target="_blank" rel="external">cross origin requests</a>. It is not the problem when launching the actual application on a device, because there is no origin in such case. A solution to this is using mock data or (even better) setting up a proxy. I plan on writing a separate blog post on that topic.</p>
<h2 id="Remote-debugging-on-a-target-device"><a href="#Remote-debugging-on-a-target-device" class="headerlink" title="Remote debugging on a target device"></a>Remote debugging on a target device</h2><p>Some time ago, Google introduced the Remote Debugging functionality in Chrome and <a href="https://developers.google.com/web/tools/chrome-devtools/remote-debugging/" target="_blank" rel="external">it is just awesome</a>. It allows you to comfortably use regular, desktop Chrome Dev Tools to remotely debug the application running on your mobile device. In order to use it you have to:</p>
<ol>
<li>Install Android SDK on your desktop.</li>
<li><a href="https://developer.android.com/studio/command-line/adb.html#Enabling" target="_blank" rel="external">Enable Developer Mode and allow USB debugging in your mobile device</a>.</li>
<li>Plug-in your mobile device to the PC using a USB cable.</li>
<li>Launch the app in your mobile device.</li>
<li>Go to <code>chrome://inspect</code> in your desktop Chrome and enable discovering USB devices.</li>
<li>Open remote dev tools by clicking inspect right next to your device listed under ‘Remote Target’ section.</li>
</ol>
<img src="/2017/10/08/Debugging-Cordova-applications/remote.png" class="center" title="Nexus 5 device listed in the Remote Targets section">
<p><a name="android4"></a> Unfortunately, it doesn’t work with Cordova applications running under Android 4. The reason behind that is that Chrome was not a default Android browser back then. Therefore, Cordova applications are hosted by a WebView which bases on the so-called Android Browser, not Chrome.</p>
<h2 id="Weinre"><a href="#Weinre" class="headerlink" title="Weinre"></a>Weinre</h2><p><a href="https://people.apache.org/~pmuellr/weinre/docs/latest/" target="_blank" rel="external">Weinre</a> is very similar to Chrome Dev Tools, since they both share large parts of code. Nevertheless, they work a little bit different.</p>
<img src="/2017/10/08/Debugging-Cordova-applications/weinre.png" class="center" width="577" title="Weinre Dev Tools">
<p>While Chrome Remote Debugging establishes connection with the target device via USB, weinre sets up a regular HTTP connection via the network. It makes the configuration a little bit more complicated, however we are not restricted to Chrome browser anymore which might be useful <a href="#android4">when debugging older devices</a>.</p>
<h2 id="ADB-logcat"><a href="#ADB-logcat" class="headerlink" title="ADB logcat"></a>ADB logcat</h2><p>It may happen that the application crashes right after it starts e.g. because of some little syntax error that is unsupported by the target browser. Therefore neither Chrome Remote Debugging or Weinre may be able to attach themselves to the app soon enough to catch and display the error.</p>
<p>In such a case we can still grab some error output by attaching our device via a USB cable and using the <code>adb logcat</code> command from Android SDK. It dumps logs produced by the device, including ones coming from the embeded WebView and/or the native Android Browser.</p>
<ol>
<li>Plug-in your mobile device to the PC using a USB cable.</li>
<li>Run <code>adb logcat | grep Web</code> (Android 5.0.0 and newer) or <code>adb logcat browser:V *:S</code> (Android 4) in the terminal.</li>
<li>Launch the app in your mobile device. Console output from the app should appear in the terminal.</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">$ adb logcat | grep Web</div><div class="line">(...)</div><div class="line">10-08 16:53:02.629 22657 22657 D SystemWebChromeClient: file:///android_asset/www/app.js: Line 3303 : device.ready</div><div class="line">10-08 16:53:02.632 22657 22657 D SystemWebChromeClient: file:///android_asset/www/app.js: Line 3303 : app.refresh</div><div class="line">10-08 16:53:02.639 22657 22657 D CordovaWebViewImpl: onPageFinished(file:///android_asset/www/index.html)</div><div class="line">10-08 16:53:02.654 22657 22657 D SystemWebChromeClient: file:///android_asset/www/app.js: Line 3303 : 0.25</div><div class="line">10-08 16:53:02.761 22657 22657 D SystemWebChromeClient: file:///android_asset/www/app.js: Line 3303 : 0.5</div><div class="line">10-08 16:53:03.005 22657 22657 D SystemWebChromeClient: file:///android_asset/www/app.js: Line 3303 : 0.75</div><div class="line">10-08 16:53:03.006 22657 22657 D SystemWebChromeClient: file:///android_asset/www/app.js: Line 3303 : 1</div><div class="line">10-08 16:53:03.098 22657 22657 D SystemWebChromeClient: file:///android_asset/www/app.js: Line 3303 : app.setupRefreshInteval</div><div class="line">10-08 16:53:03.401 22657 22657 D SystemWebChromeClient: file:///android_asset/www/app.js: Line 3303 : splash.transitionend</div><div class="line">10-08 16:53:25.627 22657 22657 D SystemWebChromeClient: file:///android_asset/www/app.js: Line 3303 : device.pause</div><div class="line">(...)</div></pre></td></tr></table></figure>
<h2 id="Console-emulator-in-the-app"><a href="#Console-emulator-in-the-app" class="headerlink" title="Console emulator in the app"></a>Console emulator in the app</h2><p>It may sound crazy, but it’s very useful to dump all of the log messages into a hidden container within the HTML. <a href="https://play.google.com/store/apps/details?id=in.zbic.timetables" target="_blank" rel="external">In one of my apps</a> I’ve implemented a secret debug console, that appears after using the <a href="https://en.wikipedia.org/wiki/Konami_Code" target="_blank" rel="external">Konami Code</a> (not so secret anymore).</p>
<img src="/2017/10/08/Debugging-Cordova-applications/debugConsole.png" class="center" width="270" title="Output provided by the adb">
<p>Thanks to this I am able to see what is going on in the application during the testing phase in the field or after the release. It also allowed me to track some of the bugs that were foreseen during the devlopment phase (mostly related to the app’s lifecycle).</p>
<h2 id="Summary"><a href="#Summary" class="headerlink" title="Summary"></a>Summary</h2><p>In the majority of cases, debugging Cordova applications do not differ very much from debugging regular web pages. Thanks to <code>cordova serve</code> command and Chrome Remote Debugging it is much less painful that it used to be. Weinre provides very similar functionality, however its configuration may be a bit challenging at the first time.</p>
<p>However, there are some rare situations when those three are not sufficient for the task, especially when running on a real device. If that happens, we can always use non-typical aproaches, such as hidden debug console in the app or processing raw log output from the ADB.</p>
<p>Happy debugging! 🐛 </p>
<p class="unsplash-credit">Photo by <a href="https://unsplash.com/photos/15YTRXKuJ14" target="_blank">Lilly Rum</a> on <a href="https://unsplash.com/" target="_blank">Unsplash</a>.</p>

                <!-- Tags and categories -->
                
                    <p class="post-tags">
                        
                            Tags: 


<a href="/tags/Apache-Cordova/">#Apache Cordova</a> <a href="/tags/Adobe-PhoneGap/">#Adobe PhoneGap</a> <a href="/tags/Android/">#Android</a>


                        
                    </p>
                    <p class="post-categories">
                        
                    </p>
                
                
                
                    <!-- Go to www.addthis.com/dashboard to customize your tools -->
                    <script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-59db9b8d10126f1d"></script>

                    <!-- Go to www.addthis.com/dashboard to customize your tools -->
                    <div class="addthis_inline_share_toolbox"></div>
                
            </div>

            <!-- Comments -->
            
                <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                    
    <hr />
    <h3>Comments:</h3>
    <div id="disqus_thread">
        <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    </div>



                </div>
            
        </div>
    </div>
</article>

    <!-- Footer -->
    <hr />

<!-- Footer -->
<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <ul class="list-inline text-center">
                    
                        <li>
                            <a href="https://twitter.com/zbicin" target="_blank">
                                <span class="fa-stack fa-lg">
                                    <i class="fa fa-circle fa-stack-2x"></i>
                                    <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
                                </span>
                            </a>
                        </li>
                    

                    

                    
                        <li>
                            <a href="https://github.com/zbicin" target="_blank">
                                <span class="fa-stack fa-lg">
                                    <i class="fa fa-circle fa-stack-2x"></i>
                                    <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                                </span>
                            </a>
                        </li>
                    

                    

                    

                    

                    
                        <li>
                            <a href="/atom.xml" target="_blank">
                                <span class="fa-stack fa-lg">
                                    <i class="fa fa-circle fa-stack-2x"></i>
                                    <i class="fa fa-feed fa-stack-1x fa-inverse"></i>
                                </span>
                            </a>
                        </li>
                    
                </ul>
                <p class="copyright text-muted">&copy; 2017 Krzysztof Zbiciński<br></p>
                <p class="copyright text-muted">Original Theme <a target="_blank" href="http://startbootstrap.com/template-overviews/clean-blog/">Clean Blog</a> from <a href="http://startbootstrap.com/" target="_blank">Start Bootstrap</a></p>
                <p class="copyright text-muted">Adapted for <a target="_blank" href="https://hexo.io/">Hexo</a> by <a href="http://www.codeblocq.com/" target="_blank">Jonathan Klughertz</a></p>
            </div>
        </div>
    </div>
</footer>


    <!-- After footer scripts -->
    
<!-- jQuery -->
<script src="//code.jquery.com/jquery-2.1.4.min.js"></script>

<!-- Bootstrap -->
<script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>

<!-- Gallery -->
<script src="//cdnjs.cloudflare.com/ajax/libs/featherlight/1.3.5/featherlight.min.js" type="text/javascript" charset="utf-8"></script>

<!-- Disqus Comments -->

<script type="text/javascript">
    var disqus_shortname = 'zbicin';

    (function(){
        var dsq = document.createElement('script');
        dsq.type = 'text/javascript';
        dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



</body>

</html>